/*!
 * Knockout-UI v0.5.0
 * A home for rich UI components based on KnockoutJS
 * Copyright (c) 2013 Ian Mckay
 * https://github.com/madcapnmckay/Knockout-UI.git
 * License: MIT (http://opensource.org/licenses/mit-license.php)
**/
(function(t){"function"==typeof require&&"object"==typeof exports&&"object"==typeof module?t(require("knockout"),require("jquery"),require("ui-core"),exports):"function"==typeof define&&define.amd?define(["knockout","jquery","ui-core","exports"],t):t(ko,$,ko.ui.core,ko.ui)})(function(t,e,i,n){"use strict";var o;t.addTemplate("tmpl_ui_dialog",["<div data-bind='UIDialog: {}'>","<div>","<div data-bind='text: title'></div>","</div>","<div data-bind='template: { name: contents, data: model }'></div>","<div data-bind='foreach: buttons'>","<div data-bind='UIButton: $data'></div>","</div>","</div>"].join("")),t.addTemplate("tmpl_ui_button",["<div data-bind='UIDialog: {}'>","<div data-bind='UIHeader: {}'>","<div data-bind='text: title'></div>","</div>","<div data-bind='template: { name: contents, data: model }'></div>","<div data-bind='foreach: buttons'>","<div data-bind='UIButton: $data'></div>","</div>","</div>"].join("")),n.defaults=n.defaults||{},o=n.defaults.dialog={title:"Dialog",template:"tmpl_ui_dialog",width:500,height:350,appendTo:document.body,draggable:!0,buttons:[{text:"Close",click:"close"}],css:{dialog:"ui-dialog",contents:"ui-contents"}},n.Dialog=i.Component.extend({init:function(e){var n=this;if(!e.contents)throw Error("You must supply a contents template in the dialog options or set a default contents template");i.extend(n,o,e),this.title=t.observable(e.title),this.visible=e.visible,this.width=t.observable(n.width),this.height=t.observable(n.height),this.buttons=t.observableArray(this._mapButtonActions(n.buttons)),this.widthAttr=t.computed(i.toDimensions(n.width)),this.heightAttr=t.computed(i.toDimensions(n.height)),t.applyBindingsExecuted(this._render,this)},toggle:function(t){this.visible.toggle(t)},show:function(){this.toggle(!0)},hide:function(){this.toggle(!1)},_mapButtonActions:function(t){var e=this;return t.map(function(t){return"function"!=typeof t.click&&(t.click=e[t.click].bind(e)),t})},_render:function(e){this.model=this.model||e,this.$dialog=this,t.renderTemplate(this.template,this,{},this.appendTo.appendChild(document.createElement("div")),"replaceNode")}}),t.extenders.dialog=function(t,e){return e.visible=t,t.dialog=new n.Dialog(e),t},t.bindingHandlers.UIDialog={init:function(t,i,n,o){o.draggable&&e(t).draggable()},update:function(e,i,n,o){t.proxyBinding.call(this,"update",e,n,o,{visible:function(){return o.visible},style:function(){return{width:o.widthAttr,height:o.heightAttr}}})}},t.bindingHandlers.UIButton={init:function(e,i,n,o){t.proxyBinding.call(this,"init",e,n,o,{event:function(){return{click:o.click}}})},update:function(e,i,n,o){t.proxyBinding.call(this,"update",e,n,o,{text:function(){return o.text}})}}});