/*!
 * Knockout-UI v0.5.0
 * A home for rich UI components based on KnockoutJS
 * Copyright (c) 2013 Ian Mckay
 * https://github.com/madcapnmckay/Knockout-UI.git
 * License: MIT (http://opensource.org/licenses/mit-license.php)
**/
(function(){var logger=function(e){"undefined"!=typeof debug&&(console.debug((new Date).toGMTString()+" : "+e),$("<div></div>").appendTo("#log").text((new Date).toGMTString()+" : eyepatch-tabs.js - "+e))},Tab=function(data,parentViewModel){if(this.parentViewModel=parentViewModel,this.name=ko.observable(data.name),this.iconCssClass=ko.observable(data.iconCssClass||"icon"),this.bodyCssClass=ko.observable(data.bodyCssClass||""),this.cssClass=ko.observable(data.cssClass||"tab"),this.isVisible=ko.observable(!0),this.contents=data.contents,void 0===data.create)throw Error("You must supply a create function for each tab");this.create="function"==typeof data.create?data.create:eval(data.create),this.isActive=ko.observable(!1);var savedActive=$.cookie(this.parentViewModel.id()+"tabactive");null!==savedActive?this.isActive(savedActive===this.name()):void 0!==data.isActive&&this.isActive(data.isActive),this.show=function(){$.each(parentViewModel.tabs(),function(e,t){t.isActive(!1)}),this.isActive(!0),this.saveState()}.bind(this),this.saveState=function(){void 0===$.cookie&&this.parentViewModel.remember()?alert("You must include $.cookie in order to use this feature"):this.parentViewModel.remember()&&(logger("saving tab position"),$.cookie(this.parentViewModel.id()+"tabactive",this.name()))}},templateEngine=new ko.jqueryTmplTemplateEngine;ko.tabs={viewModel:function(e){this.id=ko.observable(e.id),this.remember=ko.observable(e.remember||!1),this.cssClass=ko.observable(e.cssClass||"ui-tabs"),this.tabs=ko.observableArray([]);var t=this;for(var i in e.tabs)this.tabs.push(new Tab(e.tabs[i],t))}},ko.addTemplateSafe("tabTemplate",'                    <div class="${cssClass}" data-bind="click: show, css: { \'tab-active\' : isActive }, visible : isVisible, hover : \'tab-hover\'">						<span class="inner-tab">							<span class="${iconCssClass}"></span> ${ name }						</span>					</div>',templateEngine),ko.addTemplateSafe("tabBodyTemplate",'                    <div data-bind="visible: isActive" class="tab-body-inner ${ bodyCssClass }">					</div>',templateEngine),ko.addTemplateSafe("tabsContainerTemplate",'					<div class="${ cssClass }" >						<div class="tab-strip">							<div class="inner-strip" data-bind=\'template: { name : "tabTemplate", foreach: tabs }\'></div>						</div>						<div class="tab-body ${ bodyCssClass }" data-bind=\'template: { name : "tabBodyTemplate", foreach: tabs }\'></div>					</div>',templateEngine),ko.bindingHandlers.tabs={init:function(e,t,i,a){var s=t(),n=e.appendChild(document.createElement("DIV"));ko.renderTemplate("tabsContainerTemplate",s,{templateEngine:templateEngine},n,"replaceNode");for(var o=$(".tab-body-inner",e),l=0;s.tabs().length>l;l+=1){var r=s.tabs()[l],d=o[l];d.style.display="",r.create(d,r,a),r.isActive()||(d.style.display="none")}var u=s.tabs().filter(function(e){return 1==e.isActive()})[0];void 0!==u&&u.saveState()}}})();