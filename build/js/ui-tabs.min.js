/*!
 * Knockout-UI v0.5.0
 * A home for rich UI components based on KnockoutJS
 * Copyright (c) 2013 Ian Mckay
 * https://github.com/madcapnmckay/Knockout-UI.git
 * License: MIT (http://opensource.org/licenses/mit-license.php)
**/
(function(t){"function"==typeof require&&"object"==typeof exports&&"object"==typeof module?t(require("knockout"),require("ui-core"),exports):"function"==typeof define&&define.amd?define(["knockout","ui-core","exports"],t):(ko.ui=ko.ui===void 0?{core:{}}:ko.ui,t(ko,ko.ui.core,ko.ui))})(function(t,e,n){"use strict";t.addTemplate("tmpl_ui_tab_container",["<div data-bind='attr: { class : defaults.css }' >","<ul data-bind='foreach: tabs'>","<li data-bind='click: $parent.show, css: { 'active' : $parent.active() === $data,  class: css }, text: name'></li>","</ul>","<div data-bind='foreach: tabs'>","<div data-bind='visible: $parent.active() === $data, attr: { class: bodyCss }'>","<div data-bind='template : { name: template, data: data }'></div>","</div>","</div>","</div>"].join("")),n.Tab=function(t,n){var i=this;if(!n.template)throw Error("A template for the tab must be supplied");e.extend(i,{data:i},t,n)},n.TabSet=function(i){var o=this;this.defaults={css:"ui-tabs",tab:{css:"ui-tab",bodyCss:"ui-tab-body"}},e.extend(!0,{exclude:["tabs"]},o.defaults,i),i=e.extend({},{tabs:[]},i);for(var a=[],r=0,s=i.tabs.length;s>r;r+=1)a.push(new n.Tab(o.defaults.tab,i.tabs[r]));this.tabs=t.observableArray(a),this.active=t.observable(),this.show=function(t){var e=t instanceof n.Tab?t:this.get(t);if(!e)throw Error("Show method must be passed a tab index or a tab instance");o.active(e)},this.tabs().length&&this.show(i.active||0)},n.TabSet.prototype.find=function(t){return this.get(this.indexOf(t))},n.TabSet.prototype.get=function(t){return 0>t||t>=this.tabs().length?null:this.tabs()[t]},n.TabSet.prototype.indexOf=function(e){for(var n=0,i=this.tabs().length;i>n;n+=1)if(t.utils.unwrapObservable(this.tabs()[n].name)===e)return n;return-1},n.TabSet.prototype.add=function(t,e){var i=new n.Tab(this.defaults.tab,t);2===arguments.length?this.tabs.splice(e,0,i):this.tabs.push(i)},n.TabSet.prototype.remove=function(t){var e=this.indexOf(t);e>=0&&this.tabs.splice(e,1)},n.TabSet.prototype.removeAt=function(t){0>t||t>=this.tabs().length||this.tabs.splice(t,1)},t.bindingHandlers.tabs={init:function(){return{controlsDescendantBindings:!0}},update:function(e,i){for(var o=t.utils.unwrapObservable(i());e.firstChild;)t.removeNode(e.firstChild);if(!(o instanceof n.TabSet))throw Error("The tabs binding requires an instance of ko.ui.TabSet viewModel");t.renderTemplate("tmpl_ui_tab_container",o,{},e.appendChild(document.createElement("div")),"replaceNode")}}});